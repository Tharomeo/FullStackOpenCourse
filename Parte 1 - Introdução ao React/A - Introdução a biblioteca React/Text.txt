--Introdu√ß√£o √† biblioteca React--
Agora, come√ßaremos a nos familiarizar com provavelmente o t√≥pico mais importante deste curso, a biblioteca React. Vamos come√ßar criando uma aplica√ß√£o React simples, conhecendo os conceitos-chave de React.

A maneira mais simples de come√ßar √© usando uma ferramenta chamada create-react-app. √â poss√≠vel (mas n√£o necess√°rio) instalar o create-react-app em sua m√°quina se a ferramenta npm instalada junto com o Node estiver na vers√£o 5.3, pelo menos.

Durante o curo, voc√™ tamb√©m pode utilizar a nova ferramenta frontend chamada Vite, se desejar. O create-react-app ainda √© a ferramenta recomendada pelo time do React e √© por isso que continua sendo a ferramenta padr√£o para configurar um projeto React neste curso. Leia aqui como o time React enxerga o futuro das ferramentas React.

Vamos criar uma aplica√ß√£o chamada part1 e navegar at√© o seu diret√≥rio.

npx create-react-app part1
cd part1copy
A aplica√ß√£o √© executada da seguinte forma:

npm startcopy
Por padr√£o, a aplica√ß√£o √© executada no localhost, porta 3000, no endere√ßo http://localhost:3000.

Seu navegador padr√£o deve ser automaticamente aberto. Abra imediatamente o console do navegador. Al√©m disso, abra um editor de texto para que voc√™ possa ver o c√≥digo e a p√°gina web ao mesmo tempo na tela:

c√≥digo e navegador lado a lado
O c√≥digo da aplica√ß√£o reside no diret√≥rio src. Vamos simplificar o c√≥digo padr√£o para que o conte√∫do do arquivo index.js fique assim:

import React from 'react'
import ReactDOM from 'react-dom/client'

import App from './App'

ReactDOM.createRoot(document.getElementById('root')).render(<App />)copy
E o arquivo App.js fique assim:

const App = () => (
  <div>
    <p>Ol√°, mundo!</p>
  </div>
)

export default Appcopy
Os arquivos App.css, App.test.js, index.css, logo.svg, setupTests.js e reportWebVitals.js podem ser exclu√≠dos, pois n√£o s√£o necess√°rios em nossa aplica√ß√£o neste momento.




--Componente--
O arquivo App.js agora define um componente React com o nome App. O comando na linha final do arquivo index.js

ReactDOM.createRoot(document.getElementById('root')).render(<App />)copy
renderiza seu conte√∫do dentro do elemento div, definido no arquivo public/index.html, com o valor de id 'root'.

Por padr√£o, o arquivo public/index.html n√£o cont√©m nenhum marcador HTML que seja vis√≠vel para n√≥s no navegador:

<!DOCTYPE html>
<html lang="ptbr">
  <head>
      conte√∫do n√£o mostrado ...
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>copy
Voc√™ pode at√© tentar adicionar algum HTML ao arquivo, no entanto, ao usar React, todo o conte√∫do que precisa ser renderizado √© geralmente definido como "componentes React".

Vamos dar uma olhada mais de perto no c√≥digo que define o componente:

const App = () => (
  <div>
    <p>Ol√°, mundo!</p>
  </div>
)copy
Como voc√™ provavelmente j√° adivinhou, o componente ser√° renderizado como uma tag div, que envolve uma tag p contendo o texto "Ol√°, mundo!".

Tecnicamente, o componente √© definido como uma fun√ß√£o JavaScript. O c√≥digo a seguir tamb√©m √© uma fun√ß√£o (que n√£o recebe nenhum par√¢metro):

() => (
  <div>
    <p>Ol√°, mundo!</p>
  </div>
)copy
A fun√ß√£o √©, ent√£o, atribu√≠da a uma (vari√°vel) constante App:

const App = ...copy
Existem algumas maneiras de definir fun√ß√µes em JavaScript. Aqui usaremos as fun√ß√µes de seta (arrow functions), que s√£o descritas em uma vers√£o mais recente de JavaScript conhecida como ECMAScript 6, tamb√©m chamada de ES6.

Por conta da fun√ß√£o consistir em apenas uma √∫nica express√£o, usamos uma nota√ß√£o abreviada, que representa este trecho de c√≥digo:

const App = () => {
  return (
    <div>
      <p>Ol√°, mundo!</p>
    </div>
  )
}copy
Em outras palavras, a fun√ß√£o retorna o valor da express√£o.

A fun√ß√£o que define o componente pode conter qualquer tipo de c√≥digo JavaScript. Modifique seu componente da seguinte maneira:

const App = () => {
  console.log('Ol√° do componente!')
  return (
    <div>
      <p>Ol√°, mundo!</p>
    </div>
  )
}

export default Appcopy
E observe o que acontece no console do navegador:

console do navegador com uma seta mostrando o log com a mensagem "Hello from component"
A primeira regra do desenvolvimento web front-end:

Mantenha o console aberto o tempo todo.

Vamos repetir juntos: Prometo manter o console aberto o tempo todo durante este curso e pelo resto da minha vida quando estiver desenvolvendo para a web.

Tamb√©m √© poss√≠vel renderizar conte√∫do din√¢mico dentro de um componente.

Modifique o componente da seguinte maneira:

const App = () => {
  const hoje = new Date()
  const a = 10
  const b = 20
  console.log(hoje, a+b)

  return (
    <div>
      <p>Ol√°, mundo! Hoje √© {hoje.toString()}</p>
      <p>
        {a} mais {b} √© {a + b}
      </p>
    </div>
  )
}copy
Qualquer c√≥digo JavaScript dentro das chaves √© avaliado e o resultado desta avalia√ß√£o √© incorporado no lugar definido no HTML produzido pelo componente.

Note que voc√™ n√£o deve remover a linha no final do componente:

export default Appcopy
A exporta√ß√£o n√£o √© mostrada na maioria dos exemplos do material do curso. Sem a exporta√ß√£o, o componente e a aplica√ß√£o inteira desmoronam.

Voc√™ se lembrou da sua promessa de deixar o console aberto? O que foi impresso?



--JSX--
Parece que os componentes React est√£o retornando marca√ß√µes HTML. No entanto, n√£o √© esse o caso. A maior parte da estrutura de componentes React √© escrita usando JSX (JavaScript Syntax Extension [Extens√£o de Sintaxe para JavaScript]). Embora o JSX pare√ßa com HTML, estamos lidando com uma maneira de escrever JavaScript. Por baixo dos panos, o JSX retornado por componentes React √© compilado em JavaScript.

Depois da compila√ß√£o, nossa aplica√ß√£o fica assim:

const App = () => {
  const hoje = new Date()
  const a = 10
  const b = 20
  return React.createElement(
    'div',
    null,
    React.createElement(
      'p', null, 'Ol√°, mundo! Hoje √© ', hoje.toString()
    ),
    React.createElement(
      'p', null, a, ' mais ', b, ' √© ', a + b
    )
  )
}copy
A compila√ß√£o √© gerenciada pelo Babel. Projetos criados com create-react-app s√£o configurados para compilar automaticamente. Vamos aprender mais sobre esse t√≥pico na Parte 7 deste curso.

Tamb√©m √© poss√≠vel escrever React como "JavaScript puro" sem usar JSX. Embora n√£o seja recomend√°vel.

Na pr√°tica, o JSX √© muito parecido com HTML com a diferen√ßa de que, com o JSX, √© poss√≠vel inserir facilmente conte√∫do din√¢mico escrevendo c√≥digo JavaScript dentro de chaves. A ideia do JSX √© bastante semelhante a muitas linguagens de modelos, como Thymeleaf usado junto ao Java Spring, que s√£o usadas em servidores.

JSX √© "semelhante a XML" (Extensible Markup Language [Linguagem de Marca√ß√£o Extens√≠vel]), o que significa que todas as tags precisam ser fechadas. Por exemplo, uma nova linha √© um elemento vazio, que em HTML pode ser escrito da seguinte maneira:

<br>copy
Mas ao escrever em JSX, a tag precisa ser fechada:

<br />copy




--M√∫ltiplos componentes--
Vamos modificar o arquivo App.js da seguinte forma (obs.: a exporta√ß√£o na parte inferior √© omitida nestes exemplos, tanto agora quanto no futuro. Ela ainda √© necess√°ria para que o c√≥digo funcione):

const Hello = () => {
  return (
    <div>
      <p>Ol√°, mundo!</p>
    </div>
  )
}

const App = () => {
  return (
    <div>
      <h1>Ol√° a todos!</h1>
      <Hello />
    </div>
  )
}copy
Definimos um novo componente Hello e o usamos dentro do componente App. Naturalmente, um componente pode ser usado v√°rias vezes:

const App = () => {
  return (
    <div>
      <h1>Ol√° a todos!</h1>
      <Hello />
      <Hello />
      <Hello />
    </div>
  )
}copy
Escrever componentes em React √© f√°cil, e utilizando combina√ß√£o de componentes mesmo uma aplica√ß√£o mais complexa pode ser mantida de forma organizada. De fato, uma das filosofias fundamentais do React √© criar aplica√ß√µes a partir de muitos componentes que s√£o especializados e reutiliz√°veis.

Outra forte conven√ß√£o √© a ideia de um componente root chamado App no topo da √°rvore de componentes da aplica√ß√£o. No entanto, como aprenderemos na Parte 6, h√° situa√ß√µes em que o componente App n√£o √© exatamente a raiz (root), mas √© envolto em um componente utilit√°rio apropriado.




--props: passando dados para componentes--
√â poss√≠vel passar dados para componentes usando as chamadas props (properties [propriedades]).

Vamos modificar o componente Hello da seguinte maneira:

const Hello = (props) => {
  return (
    <div>
      <p>Ol√° {props.nome}</p>
    </div>
  )
}copy
Agora, a fun√ß√£o que define o componente tem um par√¢metro "props". Como argumento, o par√¢metro recebe um objeto, que possui campos correspondentes a todas as "props" que o usu√°rio do componente define.

As props s√£o definidas da seguinte forma:

const App = () => {
  return (
    <div>
      <h1>Ol√° a todos!</h1>
      <Hello nome='George' />
      <Hello nome='Daisy' />
    </div>
  )
}copy
√â poss√≠vel haver um n√∫mero arbitr√°rio de props e seus valores podem ser strings "hard-coded" (dados ou estruturas em um c√≥digo que n√£o podem ser alterados sem modificar manualmente o programa) ou resultados de express√µes JavaScript. Se o valor da prop √© obtido usando JavaScript, ele deve ser envolvido em chaves.

Vamos modificar o c√≥digo para que o componente Hello use duas props:

const Hello = (props) => {
  console.log(props)
  return (
    <div>
      <p>
        Ol√° {props.nome}, voc√™ tem {props.idade} anos
      </p>
    </div>
  )
}

const App = () => {
  const nome = 'Peter'
  const idade = 10

  return (
    <div>
      <h1>Ol√° a todos!</h1>
      <Hello nome='Maya' idade={26 + 10} />
      <Hello nome={nome} idade={idade} />
    </div>
  )
}copy
As props enviadas pelo componente App s√£o os valores das vari√°veis, isto √©, o resultado da avalia√ß√£o da express√£o de soma e de uma string comum.

O componente Hello tamb√©m registra o valor do objeto props no console.

Eu espero genuinamente que seu console esteja aberto. Se n√£o estiver, lembre-se do que voc√™ prometeu:

Eu prometo manter o console aberto o tempo todo durante este curso e pelo resto da minha vida quando estiver desenvolvendo para a web.

Desenvolvimento de software √© dif√≠cil. Fica ainda mais dif√≠cil se n√£o estiver usando todas as ferramentas poss√≠veis, como o console web e a impress√£o de depura√ß√£o com console.log. Profissionais usam ambos o tempo todo, e n√£o h√° raz√£o alguma para que um iniciante n√£o adote o uso desses m√©todos maravilhosos que tornam a vida muito mais f√°cil.




--Alguns lembretes--
O React foi configurado para gerar mensagens de erro bastante claras. Mesmo assim, voc√™ deve, pelo menos no come√ßo, avan√ßar com passos bem curtos e tendo certeza de que cada mudan√ßa funciona como desejado.

O console deve estar sempre aberto. Se o navegador relatar erros, n√£o √© aconselh√°vel continuar escrevendo mais c√≥digo, esperando por milagres. Em vez disso, voc√™ deve tentar entender a causa do erro e, por exemplo, voltar ao estado anterior de funcionamento:

captura de tela de um erro prop indefinido
Como j√° mencionamos, √© poss√≠vel e recompensador escrever comandos console.log() (que imprimem no console) ao programar em React.

Al√©m disso, tenha em mente que os nomes de componentes React devem estar com a primeira letra em mai√∫sculo. Se voc√™ tentar definir um componente da seguinte forma:

const footer = () => {
  return (
    <div>
      Aplica√ß√£o de Sauda√ß√µes criado por <a href='https://github.com/mluukkai'>mluukkai</a>
    </div>
  )
}copy
E us√°-lo desta forma:

const App = () => {
  return (
    <div>
      <h1>Ol√° a todos!</h1>
      <Hello nome='Maya' idade={26 + 10} />
      <footer />
    </div>
  )
}copy
A p√°gina n√£o vai exibir o conte√∫do definido dentro do componente Footer e, em vez disso, React cria apenas um elemento footer vazio, ou seja, o elemento HTML incorporado em vez do elemento React personalizado com o mesmo nome. Se voc√™ mudar a primeira letra do nome do componente para mai√∫sculo, o React cria um elemento div definido no componente Footer, que √© renderizado na p√°gina.

Note que o conte√∫do de um componente React (normalmente) precisa conter um elemento raiz (root). Se, por exemplo, tentarmos definir o componente App sem o elemento div externo:

const App = () => {
  return (
    <h1>Ol√° a todos!</h1>
    <Hello nome='Maya' idade={26 + 10} />
    <Footer />
  )
}copy
o resultado √© uma mensagem de erro.

captura de tela de m√∫ltiplos erros de elementos-raiz
Usar um elemento raiz n√£o √© a √∫nica op√ß√£o vi√°vel. Um array (vetor) de componentes tamb√©m √© uma solu√ß√£o v√°lida:

const App = () => {
  return [
    <h1>Ol√° a todos!</h1>,
    <Hello nome='Maya' idade={26 + 10} />,
    <Footer />
  ]
}copy
Por√©m, definir o componente raiz da aplica√ß√£o n√£o √© algo particularmente s√°bio a se fazer, e deixa o c√≥digo com uma apar√™ncia um pouco feia.

Por conta do elemento raiz ser compuls√≥rio, temos elementos div "extras" na √°rvore DOM. Isso pode ser evitado usando fragmentos, ou seja, envolvendo os elementos a serem retornados pelo componente com um elemento vazio:

const App = () => {
  const nome = 'Peter'
  const idade = 10

  return (
    <>
      <h1>Ol√° a todos!</h1>
      <Hello nome='Maya' idade={26 + 10} />
      <Hello nome={nome} idade={idade} />
      <Footer />
    </>
  )
}copy
Agora, a aplica√ß√£o compila com sucesso, e a DOM gerada pelo React n√£o cont√©m mais o elemento "div" extra.




--N√£o renderize objetos--
Considere uma aplica√ß√£o que imprime os nomes e idades de nossos amigos na tela:

const App = () => {
  const amigos = [ 
      { nome: 'Peter', idade: 4 },
      { nome: 'Maya', idade: 10 },
    ]

  return (
    <div>
      <p>{amigos[0]}</p>
      <p>{amigos[1]}</p>
    </div>
  )
}

export default Appcopy
No entanto, nada aparece na tela. Venho tentando encontrar o problema no c√≥digo h√° 15 minutos, mas n√£o consigo descobrir onde o problema poderia estar.

Eu finalmente lembro da promessa que fizemos:

Eu prometo manter o console aberto o tempo todo durante este curso e e pelo resto da minha vida quando estiver desenvolvendo para a web.

O console grita em vermelho:

fullstack content
O n√∫cleo do problema √© que: Objetos n√£o s√£o v√°lidos como elementos-filho React, isto √©, a aplica√ß√£o tenta renderizar objetos e falha novamente.

O c√≥digo tenta renderizar as informa√ß√µes de um amigo da seguinte maneira:

<p>{amigos[0]}</p>copy
E isso causa um problema, porque o item a ser renderizado dentro das chaves √© um objeto.

{ nome: 'Peter', idade: 4 }copy
Em React, elementos individuais renderizadas dentro das chaves devem ser valores primitivos, como n√∫meros ou strings.

A solu√ß√£o √© a seguinte:

const App = () => {
  const amigos = [ 
      { nome: 'Peter', idade: 4 },
      { nome: 'Maya', idade: 10 },
    ]

  return (
    <div>
      <p>{amigos[0].nome} {amigos[0].idade}</p>
      <p>{amigos[1].nome} {amigos[1].idade}</p>
    </div>
  )
}

export default Appcopy
O nome do amigo √© renderizado separadamente dentro das chaves:

{amigos[0].nome}copy
Tamb√©m a idade:

{amigos[0].idade}copy
Ap√≥s corrigir o erro, limpe as mensagens de erro do console clicando em üö´ e, em seguida, recarregue o conte√∫do da p√°gina e garanta que n√£o haja mensagens de erro exibidas.

Uma adi√ß√£o ao lembrete anterior: React tamb√©m permite que arrays sejam renderizados se conterem valores eleg√≠veis para renderiza√ß√£o (como n√∫meros ou strings). Ent√£o, o seguinte programa funcionaria, embora o resultado n√£o seja o que desejamos:

const App = () => {
  const amigos = [ 'Peter', 'Maya']

  return (
    <div>
      <p>{amigos}</p>
    </div>
  )
}copy
Nesta parte, nem vale a pena tentar usar a renderiza√ß√£o direta de tabelas. Voltaremos a discutir isso na pr√≥xima parte.